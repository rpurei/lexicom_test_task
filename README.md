# Тестовое задание Lexicom

### Назначение

Проверка практических навыков соискателя на должность Middle Backend Python программист

## Задание №1

RESTful сервис на основе **FastAPI** <https://fastapi.tiangolo.com/ru/>. 

Сервис упакован в Docker контейнер, для запуска необходимы установленные **docker-compose** и **docker**.

### Запуск

Из каталога приложения выполнить:

```shell
docker-compose up -d
```

Сервис будет доступен на любом локально адресе (например, **localhost**), порт **8000**, протокол **http**:

<http://localhost:8000/>

**Swagger** доступнен по адресу:

<http://localhost:8000/docs>

**Логи** доступны в файле **app/logs/app.log**


**Рекомендации**:

- Нужно определиться с форматом номеров телефона, будут ли только номера РФ или номера из других стран, в каком виде их хранить
- Для продакшен использования необходимо использовать **https** протокол, для чего необходимо получить SSL сертификат и ключ. Запустить uvicorn с параметрами **--ssl-certfile** и **--ssl-keyfile** указав пути в них пути к сертификату и закрытому ключу. Или указав их в соответствующей настройке **nginx** при использовании его в качестве обратного прокси для **uvicorn**.
- Добавить аутентификацию на основе **JWT** или **HTTPOnly Cookie**
- С помощью областей JWT можно разделить права ролей пользователей - кому какие операции с данными разрешены
- Настроить, например, **fail2ban** для уменьшения возможности DDoS атак
- Добавлен роут для удаления данных, а то не хватает до **CRUD** ))
- Доделать тесты

**!** в репозитории есть файлы, хранящие уязвимую информацию (пароль Redis), это сделано только с целью упрощения демонстрации ))

## Задание №2

Задача - перенести данные из столбца **status** таблицы в другую таблицу, связь таблиц через частичное совпадение значения столбца **name**.

Самый быстрый способ - использовать SQL запрос, чтобы уменьшить время исполнения операции.

Предлагаю использовать такой запрос:

```sql
UPDATE full_names fn
SET status = sn.status
FROM short_names sn
WHERE sn.name = split_part(fn.name, '.', 1)
```

**Другие варианты**:
- скрипт, например, на **Python**, который пройдет по всем записям таблицы **short_names** и обновит столбец таблицы **full_names**;
- можно использовать **ETL** систему;
- можно выгрузить данные таблицы **short_names** в CSV файл, затем загрузить из этого файла в таблицу **full_names**, используя клиент СУБД, например, **pgAdmin**.